<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sample generation with FFD &mdash; Blackbox  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running single analysis" href="single.html" />
    <link rel="prev" title="Sample generation with CST" href="cst.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Blackbox
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="intro.html">Airfoil sample generation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cst.html">Sample generation with CST</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Sample generation with FFD</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-options">Setting up options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-design-variables">Adding design variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-samples-and-accessing-data">Generating samples and accessing data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="single.html">Running single analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="field_data.html">Getting field data</a></li>
<li class="toctree-l2"><a class="reference internal" href="imp_alpha.html">Implicit alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="options.html">Options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hpc.html">Running on HPC</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Blackbox</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="intro.html">Airfoil sample generation</a></li>
      <li class="breadcrumb-item active">Sample generation with FFD</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/airfoil/ffd.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sample-generation-with-ffd">
<h1>Sample generation with FFD<a class="headerlink" href="#sample-generation-with-ffd" title="Permalink to this heading">¶</a></h1>
<p>This section explains how to use <code class="docutils literal notranslate"><span class="pre">AirfoilFFD</span></code> module for generating samples. There are typically three
main steps involved in the process: setting up options and initializing the module, adding design variables
and generating samples.</p>
<section id="setting-up-options">
<h2>Setting up options<a class="headerlink" href="#setting-up-options" title="Permalink to this heading">¶</a></h2>
<p>First step involves creating options dictionary which is used for initializating the module. The <code class="docutils literal notranslate"><span class="pre">airfoilFile</span></code>
and <code class="docutils literal notranslate"><span class="pre">nffd</span></code> are the two mandatory options, rest all are optional, please refer <a class="reference internal" href="options.html#options"><span class="std std-ref">options</span></a>
section for more details. Following snippet of the code shows an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">solverOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Common Parameters</span>
    <span class="s2">&quot;monitorvariables&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cl&quot;</span><span class="p">,</span> <span class="s2">&quot;cd&quot;</span><span class="p">,</span> <span class="s2">&quot;cmz&quot;</span><span class="p">,</span> <span class="s2">&quot;yplus&quot;</span><span class="p">],</span>
    <span class="s2">&quot;writeTecplotSurfaceSolution&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;writeSurfaceSolution&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;writeVolumeSolution&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="c1"># Physics Parameters</span>
    <span class="s2">&quot;equationType&quot;</span><span class="p">:</span> <span class="s2">&quot;RANS&quot;</span><span class="p">,</span>
    <span class="s2">&quot;smoother&quot;</span><span class="p">:</span> <span class="s2">&quot;DADI&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MGCycle&quot;</span><span class="p">:</span> <span class="s2">&quot;sg&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nsubiterturb&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;nCycles&quot;</span><span class="p">:</span> <span class="mi">7000</span><span class="p">,</span>
    <span class="c1"># ANK Solver Parameters</span>
    <span class="s2">&quot;useANKSolver&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;ANKSubspaceSize&quot;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
    <span class="s2">&quot;ANKASMOverlap&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;ANKPCILUFill&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;ANKJacobianLag&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;ANKOuterPreconIts&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;ANKInnerPreconIts&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="c1"># NK Solver Parameters</span>
    <span class="s2">&quot;useNKSolver&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;NKSwitchTol&quot;</span><span class="p">:</span> <span class="mf">1e-6</span><span class="p">,</span>
    <span class="s2">&quot;NKSubspaceSize&quot;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
    <span class="s2">&quot;NKASMOverlap&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;NKPCILUFill&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;NKJacobianLag&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;NKOuterPreconIts&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;NKInnerPreconIts&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="c1"># Termination Criteria</span>
    <span class="s2">&quot;L2Convergence&quot;</span><span class="p">:</span> <span class="mf">1e-14</span>
<span class="p">}</span>

<span class="n">meshingOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># ---------------------------</span>
    <span class="c1">#        Input Parameters</span>
    <span class="c1"># ---------------------------</span>
    <span class="s2">&quot;unattachedEdgesAreSymmetry&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;outerFaceBC&quot;</span><span class="p">:</span> <span class="s2">&quot;farfield&quot;</span><span class="p">,</span>
    <span class="s2">&quot;autoConnect&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;BC&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;jLow&quot;</span><span class="p">:</span> <span class="s2">&quot;zSymm&quot;</span><span class="p">,</span> <span class="s2">&quot;jHigh&quot;</span><span class="p">:</span> <span class="s2">&quot;zSymm&quot;</span><span class="p">}},</span>
    <span class="s2">&quot;families&quot;</span><span class="p">:</span> <span class="s2">&quot;wall&quot;</span><span class="p">,</span>
    <span class="c1"># ---------------------------</span>
    <span class="c1">#        Grid Parameters</span>
    <span class="c1"># ---------------------------</span>
    <span class="s2">&quot;N&quot;</span><span class="p">:</span> <span class="mi">129</span><span class="p">,</span>
    <span class="s2">&quot;s0&quot;</span><span class="p">:</span> <span class="mf">1e-6</span><span class="p">,</span>
    <span class="s2">&quot;marchDist&quot;</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Creating aeroproblem for adflow</span>
<span class="n">ap</span> <span class="o">=</span> <span class="n">AeroProblem</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;ap&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">mach</span><span class="o">=</span><span class="mf">0.734</span><span class="p">,</span> <span class="n">reynolds</span><span class="o">=</span><span class="mf">6.5e6</span><span class="p">,</span> <span class="n">reynoldsLength</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mf">288.15</span><span class="p">,</span>
    <span class="n">areaRef</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">chordRef</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">evalFuncs</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;cl&quot;</span><span class="p">,</span> <span class="s2">&quot;cd&quot;</span><span class="p">,</span> <span class="s2">&quot;cmz&quot;</span><span class="p">],</span> <span class="n">xRef</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">yRef</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">zRef</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="p">)</span>

<span class="n">nffd</span> <span class="o">=</span> <span class="mi">20</span> <span class="c1"># Number of FFD points</span>

<span class="c1"># Options for blackbox</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Requried options</span>
    <span class="s2">&quot;airfoilFile&quot;</span><span class="p">:</span> <span class="s2">&quot;rae2822.dat&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nffd&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="c1"># FFD Box options</span>
    <span class="s2">&quot;fitted&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;ymarginl&quot;</span><span class="p">:</span> <span class="mf">0.015</span><span class="p">,</span>
    <span class="s2">&quot;ymarginu&quot;</span><span class="p">:</span> <span class="mf">0.015</span><span class="p">,</span>
    <span class="c1"># Sampling options</span>
    <span class="s2">&quot;samplingCriterion&quot;</span><span class="p">:</span> <span class="s2">&quot;ese&quot;</span><span class="p">,</span>
    <span class="c1"># Fixing the LE/TE</span>
    <span class="s2">&quot;fixLETE&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># Smoothing options</span>
    <span class="s2">&quot;smoothing&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;smoothingTolerance&quot;</span><span class="p">:</span> <span class="mf">5e-4</span><span class="p">,</span>
    <span class="s2">&quot;smoothingTheta&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
    <span class="c1"># Other options</span>
    <span class="s2">&quot;noOfProcessors&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="s2">&quot;aeroProblem&quot;</span><span class="p">:</span> <span class="n">ap</span><span class="p">,</span>
    <span class="s2">&quot;solverOptions&quot;</span><span class="p">:</span> <span class="n">solverOptions</span><span class="p">,</span>
    <span class="s2">&quot;meshingOptions&quot;</span><span class="p">:</span> <span class="n">meshingOptions</span><span class="p">,</span>
    <span class="s2">&quot;writeAirfoilCoordinates&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;plotAirfoil&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;writeDeformedFFD&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Example for generating samples</span>
<span class="n">airfoil</span> <span class="o">=</span> <span class="n">AirfoilFFD</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
<p>Firstly, required packages and modules are imported. Then, <code class="docutils literal notranslate"><span class="pre">solverOptions</span></code> and <code class="docutils literal notranslate"><span class="pre">meshingOptions</span></code> are
created which determine the solver and meshing settings, refer <a class="reference external" href="https://mdolab-adflow.readthedocs-hosted.com/en/latest/options.html">ADflow</a>
and <a class="reference external" href="https://mdolab-pyhyp.readthedocs-hosted.com/en/latest/options.html">pyHyp</a> options for more details.
Then, <a class="reference external" href="https://mdolab-baseclasses.readthedocs-hosted.com/en/latest/pyAero_problem.html">AeroProblem</a>
object is created which contains details about the flow conditions and the desired output variables are
defined using <code class="docutils literal notranslate"><span class="pre">evalFuncs</span></code> argument. Then, <code class="docutils literal notranslate"><span class="pre">options</span></code> dictionary is created, refer <a class="reference internal" href="options.html#options"><span class="std std-ref">options</span></a>
section for more details. There are two important options which are needed when using FFD as parameterization:</p>
<ul>
<li><p>The airfoil sample generated by FFD are sometimes twisted i.e. the chord of the airfoil is not parallel to x-axis.
This can be fixed by setting <code class="docutils literal notranslate"><span class="pre">fixLETE</span></code> option to <code class="docutils literal notranslate"><span class="pre">True</span></code> which will make one of the FFD point at both LE and TE dependent
on other point.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When <code class="docutils literal notranslate"><span class="pre">fixLETE</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the total number of shape variables will be nffd- 2.</p>
</div>
</li>
<li><p>The generated airfoils are typically abnormal. So, it is quite useful to use <code class="docutils literal notranslate"><span class="pre">smoothing</span></code> option which uses
Laplacian smoothing technique. Mathematically, it can be written as:</p>
<div class="math notranslate nohighlight">
\[y_j = \theta y_j + \frac{1 - \theta}{n_{\text{neighbour}}} \sum_{k=1}^{n_{\text{neighbour}}} y_k\]</div>
<p>where <span class="math notranslate nohighlight">\(y_j\)</span> is the <span class="math notranslate nohighlight">\(j^{th}\)</span> FFD point, <span class="math notranslate nohighlight">\(\theta\)</span> is the smoothing parameter and <span class="math notranslate nohighlight">\(n_{\text{neighbour}}\)</span>
is the number of neighbours. For airfoil, <span class="math notranslate nohighlight">\(n_{\text{neighbour}}\)</span> is set to 2.</p>
</li>
</ul>
<p>After setting all the options properly, the <code class="docutils literal notranslate"><span class="pre">AirfoilFFD</span></code> module  is initialized.</p>
</section>
<section id="adding-design-variables">
<h2>Adding design variables<a class="headerlink" href="#adding-design-variables" title="Permalink to this heading">¶</a></h2>
<p>Next step is to add design variables based on which samples will be generated. The <code class="docutils literal notranslate"><span class="pre">addDV</span></code> method needs three arguments:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">(str)</span></code>: name of the design variable to add. The available design variables are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">shape</span></code>: FFD control points which parameterize the airfoil shape</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alpha</span></code>: Angle of attack for the analysis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mach</span></code>: Mach number for the analysis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">altitude</span></code>: Altitude for the analysis</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lowerBound</span> <span class="pre">(numpy</span> <span class="pre">array</span> <span class="pre">or</span> <span class="pre">float)</span></code>: lower bound for the variable</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upperBound</span> <span class="pre">(numpy</span> <span class="pre">array</span> <span class="pre">or</span> <span class="pre">float)</span></code>: upper bound for the variable</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>When <code class="docutils literal notranslate"><span class="pre">shape</span></code> variable is to be added, the lower and upper bound should be a 1D numpy array of the same size
as the number of FFD points mentioned in the <code class="docutils literal notranslate"><span class="pre">options</span></code> dictionary. For other cases, lower and upper bound
should be float. When <code class="docutils literal notranslate"><span class="pre">fixLETE</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the size of the lower and upper bound for <code class="docutils literal notranslate"><span class="pre">shape</span></code>
variable should be nffd -2.</p>
</div>
</div></blockquote>
</li>
</ul>
<p>Following code adds <code class="docutils literal notranslate"><span class="pre">alpha</span></code> and <code class="docutils literal notranslate"><span class="pre">shape</span></code> as design variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">airfoil</span><span class="o">.</span><span class="n">addDV</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)</span>

<span class="n">lb</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">nffd</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span>
<span class="n">ub</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">nffd</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span>
<span class="n">airfoil</span><span class="o">.</span><span class="n">addDV</span><span class="p">(</span><span class="s2">&quot;shape&quot;</span><span class="p">,</span> <span class="n">lowerBound</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">upperBound</span><span class="o">=</span><span class="n">ub</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, the upper and lower bound for <code class="docutils literal notranslate"><span class="pre">shape</span></code> variable is set to 0.1 and -0.1, respectively. As noted above, the size of the
lower and upper bound for <code class="docutils literal notranslate"><span class="pre">shape</span></code> variable is set to <code class="docutils literal notranslate"><span class="pre">nffd</span> <span class="pre">-</span> <span class="pre">2</span></code>.</p>
</section>
<section id="generating-samples-and-accessing-data">
<h2>Generating samples and accessing data<a class="headerlink" href="#generating-samples-and-accessing-data" title="Permalink to this heading">¶</a></h2>
<p>After adding design variables, generating samples is very easy. You just need to use <code class="docutils literal notranslate"><span class="pre">generateSamples</span></code>
method from the initialized object. This method has two arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numSamples</span> <span class="pre">(int)</span></code>: number of samples to generate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doe</span> <span class="pre">(numpy</span> <span class="pre">array)</span></code>: 2D numpy array in which each row represents a specific sample</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can either provide <code class="docutils literal notranslate"><span class="pre">numSamples</span></code> or <code class="docutils literal notranslate"><span class="pre">doe</span></code> i.e. both of them are mutually exclusive.
If both are provided, then an error will be raised.</p>
</div>
<p>Typically, <code class="docutils literal notranslate"><span class="pre">numSamples</span> <span class="pre">(int)</span></code> should be used for generating samples. This option will internally generate doe based on the
options provided while initializating the module. In some cases, you might want to generate samples based on your own doe. In that
case, you use <code class="docutils literal notranslate"><span class="pre">doe</span> <span class="pre">(numpy</span> <span class="pre">array)</span></code> argument. Following snippet of the code will generate 10 samples using internally generated doe:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">airfoil</span><span class="o">.</span><span class="n">generateSamples</span><span class="p">(</span><span class="n">numSamples</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>You can see the following output upon successful completion of sample generation process:</p>
<ul>
<li><p>A folder with the name specificed in the <code class="docutils literal notranslate"><span class="pre">directory</span></code> option (or the default name - <em>output</em>) is created. This folder contains all the generated
files/folders.</p></li>
<li><p>Within the main output folder, there will be subfolders equal to the number of samples you requested. Each of the folder corresponds to the specific
analysis performed. It will contain log.txt which contains the output from mesh generation and solver. There will be other files depending on the
options provided to solver and blackbox.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data.mat</span></code> file which contains:</p>
<blockquote>
<div><ul>
<li><p><strong>Input variable</strong>: a 2D numpy array <code class="docutils literal notranslate"><span class="pre">x</span></code> in which each row represents a specific sample based on which analysis is performed. The number
of rows will be usually equal to the number of samples argument in the <code class="docutils literal notranslate"><span class="pre">generateSamples</span></code> method. But, many times few of the analysis
fail. It depends a lot on the solver and meshing options, so set those options after some tuning.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The order of values in each row is based on how you add design variables. In this tutorial, first <code class="docutils literal notranslate"><span class="pre">alpha</span></code> is added as
design variable and then FFD coefficients are added. Thus, first value in each row will be alpha, next 18
values will be FFD coefficients.</p>
</div>
</li>
<li><p><strong>Output variables</strong>: There are two kinds of output variables - mandatory and user specificed. The <code class="docutils literal notranslate"><span class="pre">evalFuncs</span></code> argument in the aero problem
decides the user desired variables. Along with these variables, <cite>area</cite> of the airfoil is the mandatory objective.</p></li>
</ul>
</div></blockquote>
<p>Following snippet shows how to access the data.mat file. In this tutorial, <code class="docutils literal notranslate"><span class="pre">evalFuncs</span></code> argument contains
<code class="docutils literal notranslate"><span class="pre">cl</span></code>, <code class="docutils literal notranslate"><span class="pre">cd</span></code>, <code class="docutils literal notranslate"><span class="pre">cmz</span></code>. So, data.mat will contain these variables, along with <code class="docutils literal notranslate"><span class="pre">area</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.io</span> <span class="kn">import</span> <span class="n">loadmat</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="s2">&quot;data.mat&quot;</span><span class="p">)</span> <span class="c1"># mention the location of mat file</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>
<span class="n">cl</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;cl&quot;</span><span class="p">]</span>
<span class="n">cd</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;cd&quot;</span><span class="p">]</span>
<span class="n">cmz</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;cmz&quot;</span><span class="p">]</span>
<span class="n">area</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ffd.xyz</span></code>: contains the coordinates of the FFD box in plot3D format which is created around the airfoil.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description.txt</span></code>: contains various informations about the sample generation such as design variables, bounds, number of failed analysis, etc.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cst.html" class="btn btn-neutral float-left" title="Sample generation with CST" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="single.html" class="btn btn-neutral float-right" title="Running single analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, CODE Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>